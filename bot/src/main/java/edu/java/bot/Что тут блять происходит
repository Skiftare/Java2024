UpdateEvent - это setUpdate(...)
Потом идёт что-то типа распределительного пункта  (надо только понять, можно ли писать /track (....), если да, предусмотреть)
Кстати, распред. пункт можно тоже сделать псевдо-командой. Ну это уже дичь

После этого Пинается соответсвующая команда
Если команда хочет, она обращается к dialogManager-у, который единственный обладает паматью. Он
1) смотрит на состояние диалога
2) если что, пинает базы данных

Затем в игру вступает dialogManager,
